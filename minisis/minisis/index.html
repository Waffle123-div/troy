<!doctype html>
<html lang="en" data-theme="light">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <title>Student Information System - Advanced</title>
    <link rel="stylesheet" href="style.css">
  </head>
  <body>
    <!-- Mobile Overlay -->
    <div class="mobile-overlay" id="mobileOverlay"></div>

    <!-- Sidebar Navigation -->
    <aside class="sidebar" id="sidebar">
      <!-- Toggle Button -->
      <button class="sidebar-toggle" id="sidebarToggle" aria-label="Toggle Sidebar">
        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M12.707 5.293a1 1 0 010 1.414L9.414 10l3.293 3.293a1 1 0 01-1.414 1.414l-4-4a1 1 0 010-1.414l4-4a1 1 0 011.414 0z" clip-rule="evenodd"/>
        </svg>
      </button>
      
      <div class="sidebar-header">
        <div class="logo">
          <svg width="48" height="48" viewBox="0 0 48 48" fill="none">
            <rect width="48" height="48" rx="12" fill="white" fill-opacity="0.15"/>
            <path d="M24 14C24 14 18 14 18 14C18 14 18 20 18 24C18 28 18 34 18 34L24 32L30 34C30 34 30 28 30 24C30 20 30 14 30 14C30 14 24 14 24 14Z" fill="white"/>
            <path d="M20 22L22 24L26 20" stroke="white" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
          </svg>
        </div>
      </div>
      
      <nav class="sidebar-nav">
        <a href="#" class="nav-item active" data-page="dashboard">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M3 4a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 12a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1v-4zM11 4a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V4zM11 12a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"/>
          </svg>
          <span>Dashboard</span>
        </a>
        <a href="#" class="nav-item" data-page="analytics">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
          </svg>
          <span>Analytics</span>
        </a>
        <a href="#" class="nav-item" data-page="students">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
          </svg>
          <span>Students</span>
        </a>
        <a href="#" class="nav-item" data-page="add">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M10 3a1 1 0 011 1v5h5a1 1 0 110 2h-5v5a1 1 0 11-2 0v-5H4a1 1 0 110-2h5V4a1 1 0 011-1z" clip-rule="evenodd"/>
          </svg>
          <span>Add Student</span>
        </a>
        <a href="#" class="nav-item" data-page="edit">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path d="M13.586 3.586a2 2 0 112.828 2.828l-.793.793-2.828-2.828.793-.793zM11.379 5.793L3 14.172V17h2.828l8.38-8.379-2.83-2.828z"/>
          </svg>
          <span>Edit Grade</span>
        </a>
        <a href="#" class="nav-item" data-page="xslt">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M4 4a2 2 0 012-2h4.586A2 2 0 0112 2.586L15.414 6A2 2 0 0116 7.414V16a2 2 0 01-2 2H6a2 2 0 01-2-2V4z" clip-rule="evenodd"/>
          </svg>
          <span>XSLT View</span>
        </a>
      </nav>

      <!-- Theme Toggle -->
      <div class="theme-toggle-container">
        <div class="theme-toggle" id="themeToggle">
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" class="sun-icon">
            <path fill-rule="evenodd" d="M10 2a1 1 0 011 1v1a1 1 0 11-2 0V3a1 1 0 011-1zm4 8a4 4 0 11-8 0 4 4 0 018 0zm-.464 4.95l.707.707a1 1 0 001.414-1.414l-.707-.707a1 1 0 00-1.414 1.414zm2.12-10.607a1 1 0 010 1.414l-.706.707a1 1 0 11-1.414-1.414l.707-.707a1 1 0 011.414 0zM17 11a1 1 0 100-2h-1a1 1 0 100 2h1zm-7 4a1 1 0 011 1v1a1 1 0 11-2 0v-1a1 1 0 011-1zM5.05 6.464A1 1 0 106.465 5.05l-.708-.707a1 1 0 00-1.414 1.414l.707.707zm1.414 8.486l-.707.707a1 1 0 01-1.414-1.414l.707-.707a1 1 0 011.414 1.414zM4 11a1 1 0 100-2H3a1 1 0 000 2h1z" clip-rule="evenodd"/>
          </svg>
          <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor" class="moon-icon" style="display:none;">
            <path d="M17.293 13.293A8 8 0 016.707 2.707a8.001 8.001 0 1010.586 10.586z"/>
          </svg>
          <span id="themeText">Dark Mode</span>
        </div>
      </div>
    </aside>

    <!-- Main Content -->
    <main class="main-content">
      <!-- Header -->
      <header class="topbar">
        <button class="mobile-menu-btn" id="mobileMenuBtn" style="display:none;">
          <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M3 5a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 10a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zM3 15a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1z" clip-rule="evenodd"/>
          </svg>
        </button>
        <div class="search-box">
          <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
            <path fill-rule="evenodd" d="M8 4a4 4 0 100 8 4 4 0 000-8zM2 8a6 6 0 1110.89 3.476l4.817 4.817a1 1 0 01-1.414 1.414l-4.816-4.816A6 6 0 012 8z" clip-rule="evenodd"/>
          </svg>
          <input id="searchInput" type="text" placeholder="Search students... (Ctrl+K)">
          <div class="search-autocomplete" id="searchAutocomplete"></div>
        </div>
        <div class="user-info">
          <button class="view-toggle-btn" id="viewToggleBtn" style="display:none;">
            <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
              <path d="M3 4a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1V4zM3 12a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1H4a1 1 0 01-1-1v-4zM11 4a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1V4zM11 12a1 1 0 011-1h4a1 1 0 011 1v4a1 1 0 01-1 1h-4a1 1 0 01-1-1v-4z"/>
            </svg>
            <span id="viewToggleText">Card View</span>
          </button>
        </div>
      </header>

      <!-- Dashboard Page -->
      <div id="dashboardPage" class="page active">
        <div class="hero-card">
          <div class="hero-content">
            <p class="hero-date" id="currentDate">Loading...</p>
            <h1 class="hero-title">Welcome to Student Portal!</h1>
            <p class="hero-subtitle">Manage and view student records with XML & JavaScript</p>
          </div>
        </div>

        <div class="stats-grid">
          <div class="stat-card" data-preset="all">
            <div class="stat-icon" style="background: linear-gradient(135deg, #80aad3 0%, #5b86b6 100%);">
              <svg width="24" height="24" viewBox="0 0 20 20" fill="white">
                <path d="M9 6a3 3 0 11-6 0 3 3 0 016 0zM17 6a3 3 0 11-6 0 3 3 0 016 0zM12.93 17c.046-.327.07-.66.07-1a6.97 6.97 0 00-1.5-4.33A5 5 0 0119 16v1h-6.07zM6 11a5 5 0 015 5v1H1v-1a5 5 0 015-5z"/>
              </svg>
            </div>
            <div class="stat-info">
              <p class="stat-label">Total Students</p>
              <p class="stat-value" id="totalStudents">0</p>
            </div>
          </div>

          <div class="stat-card" data-preset="honor">
            <div class="stat-icon" style="background: linear-gradient(135deg, #3f6593 0%, #1b3554 100%);">
              <svg width="24" height="24" viewBox="0 0 20 20" fill="white">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
              </svg>
            </div>
            <div class="stat-info">
              <p class="stat-label">Honor Students</p>
              <p class="stat-value" id="honorStudents">0</p>
            </div>
          </div>

          <div class="stat-card">
            <div class="stat-icon" style="background: linear-gradient(135deg, #c0e6fd 0%, #80aad3 100%);">
              <svg width="24" height="24" viewBox="0 0 20 20" fill="white">
                <path d="M10.394 2.08a1 1 0 00-.788 0l-7 3a1 1 0 000 1.84L5.25 8.051a.999.999 0 01.356-.257l4-1.714a1 1 0 11.788 1.838L7.667 9.088l1.94.831a1 1 0 00.787 0l7-3a1 1 0 000-1.838l-7-3zM3.31 9.397L5 10.12v4.102a8.969 8.969 0 00-1.05-.174 1 1 0 01-.89-.89 11.115 11.115 0 01.25-3.762zM9.3 16.573A9.026 9.026 0 007 14.935v-3.957l1.818.78a3 3 0 002.364 0l5.508-2.361a11.026 11.026 0 01.25 3.762 1 1 0 01-.89.89 8.968 8.968 0 00-5.35 2.524 1 1 0 01-1.4 0zM6 18a1 1 0 001-1v-2.065a8.935 8.935 0 00-2-.712V17a1 1 0 001 1z"/>
              </svg>
            </div>
            <div class="stat-info">
              <p class="stat-label">Courses</p>
              <p class="stat-value" id="totalCourses">0</p>
            </div>
          </div>

          <div class="stat-card" data-preset="excellent">
            <div class="stat-icon" style="background: linear-gradient(135deg, #22c55e 0%, #16a34a 100%);">
              <svg width="24" height="24" viewBox="0 0 20 20" fill="white">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd"/>
              </svg>
            </div>
            <div class="stat-info">
              <p class="stat-label">Excellent (90+)</p>
              <p class="stat-value" id="excellentStudents">0</p>
            </div>
          </div>
        </div>

        <div class="quick-actions">
          <h2>Quick Actions & Filters</h2>
          <div class="action-buttons">
            <button id="honorToggleBtn" class="action-btn">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path d="M9.049 2.927c.3-.921 1.603-.921 1.902 0l1.07 3.292a1 1 0 00.95.69h3.462c.969 0 1.371 1.24.588 1.81l-2.8 2.034a1 1 0 00-.364 1.118l1.07 3.292c.3.921-.755 1.688-1.54 1.118l-2.8-2.034a1 1 0 00-1.175 0l-2.8 2.034c-.784.57-1.838-.197-1.539-1.118l1.07-3.292a1 1 0 00-.364-1.118L2.98 8.72c-.783-.57-.38-1.81.588-1.81h3.461a1 1 0 00.951-.69l1.07-3.292z"/>
              </svg>
              Show Honor Students
            </button>
            <button id="reloadBtn" class="action-btn secondary">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M4 2a1 1 0 011 1v2.101a7.002 7.002 0 0111.601 2.566 1 1 0 11-1.885.666A5.002 5.002 0 005.999 7H9a1 1 0 010 2H4a1 1 0 01-1-1V3a1 1 0 011-1zm.008 9.057a1 1 0 011.276.61A5.002 5.002 0 0014.001 13H11a1 1 0 110-2h5a1 1 0 011 1v5a1 1 0 11-2 0v-2.101a7.002 7.002 0 01-11.601-2.566 1 1 0 01.61-1.276z" clip-rule="evenodd"/>
              </svg>
              Reload XML
            </button>
            <button id="exportBtn" class="action-btn secondary">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
              </svg>
              Export CSV
            </button>
            <button id="exportPdfBtn" class="action-btn secondary">
              <svg width="20" height="20" viewBox="0 0 20 20" fill="currentColor">
                <path fill-rule="evenodd" d="M6 2a2 2 0 00-2 2v12a2 2 0 002 2h8a2 2 0 002-2V7.414A2 2 0 0015.414 6L12 2.586A2 2 0 0010.586 2H6zm5 6a1 1 0 10-2 0v3.586l-1.293-1.293a1 1 0 10-1.414 1.414l3 3a1 1 0 001.414 0l3-3a1 1 0 00-1.414-1.414L11 11.586V8z" clip-rule="evenodd"/>
              </svg>
              Print/PDF
            </button>
            <div class="filter-group">
              <label for="courseSelect">Course:</label>
              <select id="courseSelect"></select>
            </div>
            <div class="filter-group">
              <label for="yearSelect">Year:</label>
              <select id="yearSelect"></select>
            </div>
          </div>
        </div>
      </div>

      <!-- Analytics Page -->
      <div id="analyticsPage" class="page">
        <div class="page-header">
          <h2>Analytics & Insights</h2>
        </div>

        <div class="analytics-grid">
          <div class="analytics-card">
            <div class="analytics-value" id="avgGrade">0</div>
            <div class="analytics-label">Average Grade</div>
          </div>
          <div class="analytics-card">
            <div class="analytics-value" id="atRiskCount">0</div>
            <div class="analytics-label">At Risk (<70)</div>
          </div>
          <div class="analytics-card">
            <div class="analytics-value" id="passingRate">0%</div>
            <div class="analytics-label">Passing Rate</div>
          </div>
          <div class="analytics-card">
            <div class="analytics-value" id="topPerformer">-</div>
            <div class="analytics-label">Top Performer</div>
          </div>
        </div>

        <div class="charts-grid">
          <div class="chart-card">
            <h3>Students by Course</h3>
            <canvas id="courseChart" class="chart-canvas"></canvas>
          </div>
          <div class="chart-card">
            <h3>Grade Distribution</h3>
            <canvas id="gradeChart" class="chart-canvas"></canvas>
          </div>
          <div class="chart-card">
            <h3>Students by Year Level</h3>
            <canvas id="yearChart" class="chart-canvas"></canvas>
          </div>
          <div class="chart-card">
            <h3>Performance Trends</h3>
            <canvas id="performanceChart" class="chart-canvas"></canvas>
          </div>
        </div>
      </div>

      <!-- Students Table/Cards Page -->
      <div id="studentsPage" class="page">
        <div class="page-header">
          <h2>All Students</h2>
          <div class="sort-controls">
            <label for="sortSelect">Sort by:</label>
            <select id="sortSelect">
              <option value="id">ID</option>
              <option value="name">Name</option>
              <option value="year">Year Level</option>
              <option value="grade">Grade</option>
              <option value="honor">Honor Status</option>
            </select>
            <button id="sortOrderBtn" class="action-btn secondary" title="Toggle Sort Order">
              <svg width="18" height="18" viewBox="0 0 20 20" fill="currentColor">
                <path d="M3 3a1 1 0 000 2h11a1 1 0 100-2H3zM3 7a1 1 0 000 2h5a1 1 0 000-2H3zM3 11a1 1 0 100 2h4a1 1 0 100-2H3zM13 16a1 1 0 102 0v-5.586l1.293 1.293a1 1 0 001.414-1.414l-3-3a1 1 0 00-1.414 0l-3 3a1 1 0 101.414 1.414L13 10.414V16z"/>
              </svg>
            </button>
          </div>
        </div>

        <!-- Filter Badges -->
        <div class="filter-badges" id="filterBadges"></div>

        <!-- Table View -->
        <div class="card" id="tableView">
          <div class="table-responsive">
            <table id="studentsTable">
              <thead>
                <tr>
                  <th><input type="checkbox" id="selectAll" class="select-checkbox"></th>
                  <th>ID</th>
                  <th>Name</th>
                  <th>Course</th>
                  <th>Year</th>
                  <th>Grade</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="studentsTableBody"></tbody>
            </table>
          </div>
        </div>

        <!-- Card View -->
        <div id="cardView" class="students-grid" style="display:none;"></div>
      </div>

      <!-- Add Student Page -->
      <div id="addPage" class="page">
        <div class="add-header hero-card">
          <div class="add-header-inner">
            <div class="add-avatar" aria-hidden="true">
              <svg width="56" height="56" viewBox="0 0 24 24" fill="currentColor">
                <path d="M12 12c2.8 0 5-2.2 5-5s-2.2-5-5-5-5 2.2-5 5 2.2 5 5 5zm0 2c-4.4 0-8 2.2-8 5v1h16v-1c0-2.8-3.6-5-8-5z"/>
              </svg>
            </div>
            <div class="add-title" id="addPreviewName">—</div>
            <div class="add-subtitle">ID: <span id="addPreviewId">000000</span></div>
          </div>
        </div>

        <div class="card">
          <div style="text-align:center;margin-bottom:8px;">
            <h2 style="margin-bottom:4px;">Add New Student</h2>
            <div style="color:var(--text-secondary);font-size:14px;">Fill out the form below to register a new student record</div>
          </div>
          <form id="addForm" onreset="setTimeout(()=>{document.getElementById('addPreviewName').textContent='—';document.getElementById('addPreviewId').textContent='000000';},0)">
            <div class="add-form-grid">
              <div class="field">
                <label for="addName">Full Name</label>
                <input id="addName" name="name" type="text" required placeholder="e.g., Jane Doe" oninput="document.getElementById('addPreviewName').textContent=this.value.trim()||'—'">
              </div>
              <div class="field">
                <label for="addId">Student ID</label>
                <input id="addId" name="studentId" type="text" inputmode="numeric" maxlength="6" pattern="\d{6}" placeholder="000001" oninput="document.getElementById('addPreviewId').textContent=(this.value&&/^\d{1,6}$/.test(this.value)?String(this.value).padStart(6,'0'):'000000')">
              </div>
              <div class="field">
                <label for="addGrade">Grade</label>
                <input id="addGrade" name="grade" type="number" min="1.0" max="5.0" step="0.25" required placeholder="1.0 - 5.0">
              </div>
              <div class="field">
                <label for="addCourse">Program/Course</label>
                <input id="addCourse" name="course" type="text" required placeholder="e.g., Computer Science">
              </div>
              <div class="field">
                <label for="addYear">Year Level</label>
                <select id="addYear" name="year" required>
                  <option value="">Select Year</option>
                  <option value="1">1st Year</option>
                  <option value="2">2nd Year</option>
                  <option value="3">3rd Year</option>
                  <option value="4">4th Year</option>
                </select>
              </div>
            </div>
            <div class="form-actions">
              <button type="submit" class="btn-primary" style="max-width:180px;">Add student</button>
              <button type="reset" class="action-btn secondary" style="max-width:180px;">Reset</button>
            </div>
          </form>
        </div>
      </div>

      <!-- Edit Grade Page -->
      <div id="editPage" class="page">
        <div class="page-header">
          <h2>Edit Student Grade</h2>
        </div>
        <div class="card form-card-container">
          <form id="editForm">
            <div class="field">
              <label for="editStudentSelect">Select Student *</label>
              <select id="editStudentSelect" name="studentId" required></select>
            </div>
            <div class="field">
              <label for="editGrade">New GPA (1.0-5.0) *</label>
              <input id="editGrade" name="grade" type="number" min="1.0" max="5.0" step="0.25" required placeholder="1.0 (Excellent) - 5.0 (Failing)">
              <small style="color:var(--text-secondary);font-size:12px;margin-top:4px;display:block;">Lower is better: 1.0=A, 1.5=B+, 2.0=B, 2.5=C+, 3.0=C, 5.0=F</small>
            </div>
            <button type="submit" class="btn-primary">Update Grade</button>
          </form>
        </div>
      </div>

      <!-- XSLT View Page -->
      <div id="xsltPage" class="page">
        <div class="page-header">
          <h2>Students (XSLT Transform)</h2>
        </div>
        <div class="card" id="xsltContainer">
          <div id="xsltOutput"></div>
        </div>
      </div>
    </main>

    <!-- Toast Container -->
    <div class="toast-container" id="toastContainer"></div>

    <!-- Bulk Actions Bar -->
    <div class="bulk-actions-bar" id="bulkActionsBar">
      <span id="selectedCount">0 selected</span>
      <button class="action-btn secondary" id="bulkExportBtn">
        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M3 17a1 1 0 011-1h12a1 1 0 110 2H4a1 1 0 01-1-1zm3.293-7.707a1 1 0 011.414 0L9 10.586V3a1 1 0 112 0v7.586l1.293-1.293a1 1 0 111.414 1.414l-3 3a1 1 0 01-1.414 0l-3-3a1 1 0 010-1.414z" clip-rule="evenodd"/>
        </svg>
        Export
      </button>
      <button class="action-btn danger" id="bulkDeleteBtn">
        <svg width="16" height="16" viewBox="0 0 20 20" fill="currentColor">
          <path fill-rule="evenodd" d="M9 2a1 1 0 00-.894.553L7.382 4H4a1 1 0 000 2v10a2 2 0 002 2h8a2 2 0 002-2V6a1 1 0 100-2h-3.382l-.724-1.447A1 1 0 0011 2H9zM7 8a1 1 0 012 0v6a1 1 0 11-2 0V8zm5-1a1 1 0 00-1 1v6a1 1 0 102 0V8a1 1 0 00-1-1z" clip-rule="evenodd"/>
        </svg>
        Delete
      </button>
      <button class="action-btn secondary" id="bulkDeselectBtn">Clear</button>
    </div>

    <!-- Student Profile Modal -->
    <div class="modal-overlay" id="profileModal">
      <div class="modal">
        <div class="modal-header">
          <h2>Student Profile</h2>
          <button class="modal-close" id="profileModalClose">
            <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
            </svg>
          </button>
        </div>
        <div class="modal-body" id="profileModalBody">
          <!-- Profile details will be injected here -->
        </div>
      </div>
    </div>

    <!-- Edit Student Details Modal -->
    <div class="modal-overlay" id="editDetailsModal">
      <div class="modal">
        <div class="modal-header">
          <h2>Edit Student Details</h2>
          <button class="modal-close" id="editDetailsModalClose">
            <svg width="24" height="24" viewBox="0 0 20 20" fill="currentColor">
              <path fill-rule="evenodd" d="M4.293 4.293a1 1 0 011.414 0L10 8.586l4.293-4.293a1 1 0 111.414 1.414L11.414 10l4.293 4.293a1 1 0 01-1.414 1.414L10 11.414l-4.293 4.293a1 1 0 01-1.414-1.414L8.586 10 4.293 5.707a1 1 0 010-1.414z" clip-rule="evenodd"/>
            </svg>
          </button>
        </div>
        <div class="modal-body" id="editDetailsModalBody">
          <form id="editDetailsForm">
            <input type="hidden" id="editDetailsOldId" name="oldStudentId">
            <div class="field">
              <label for="editDetailsId">Student ID (6 digits) *</label>
              <input id="editDetailsId" name="studentId" type="text" pattern="\d{6}" maxlength="6" required placeholder="e.g., 000001, 000002">
              <small style="color:var(--text-secondary);font-size:12px;margin-top:4px;display:block;">⚠️ Must be 6 digits (e.g., 000001). Changing ID will update all references</small>
            </div>
            <div class="field">
              <label for="editDetailsName">Student Name *</label>
              <input id="editDetailsName" name="name" type="text" required placeholder="e.g., Jane Doe">
            </div>
            <div class="field">
              <label for="editDetailsCourse">Course *</label>
              <select id="editDetailsCourse" name="course" required>
                <option value="">Select Course</option>
              </select>
            </div>
            <div class="field">
              <label for="editDetailsYear">Year Level *</label>
              <select id="editDetailsYear" name="year" required>
                <option value="">Select Year</option>
                <option value="1">1st Year</option>
                <option value="2">2nd Year</option>
                <option value="3">3rd Year</option>
                <option value="4">4th Year</option>
              </select>
            </div>
            <div class="field">
              <label for="editDetailsGrade">GPA (1.0-5.0) *</label>
              <input id="editDetailsGrade" name="grade" type="number" min="1.0" max="5.0" step="0.25" required placeholder="1.0 (Excellent) - 5.0 (Failing)">
              <small style="color:var(--text-secondary);font-size:12px;margin-top:4px;display:block;">Lower is better: 1.0=A, 1.5=B+, 2.0=B, 2.5=C+, 3.0=C, 5.0=F</small>
            </div>
            <div style="display:flex;gap:12px;margin-top:24px;">
              <button type="submit" class="btn-primary" style="flex:1;">Save Changes</button>
              <button type="button" class="action-btn secondary" id="editDetailsCancelBtn" style="flex:1;">Cancel</button>
            </div>
          </form>
        </div>
      </div>
    </div>

    <!-- Keyboard Shortcuts Hint -->
    <div class="shortcuts-hint">
      <kbd>Ctrl</kbd> + <kbd>K</kbd> Search | <kbd>Esc</kbd> Close
    </div>

    <!-- Hidden file input for import -->
    <input type="file" id="importFile" accept=".csv,.xml" style="display:none;">

    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.min.js"></script>
    <script src="app.js"></script>
  </body>
</html>
